# 프로세스와 스레드 차이점 요약

| 항목 | 프로세스 | 스레드 |
| :---: | :---: | :---: |
| 정의 | 실행 중인 프로그램의 인스턴스 | 프로세스 내의 독립적인 실행 경로 |
| 메모리 공간 | 각 프로세스는 독립적인 메모리 공간을 가짐 | 프로세스의 메모리 공간을 공유 |
| 생성 비용 | 비교적 높음 (자체적인 메모리 공간과 PCB 필요) | 비교적 낮음 (이미 생성된 프로세스의 메모리 공간을 공유하기 때문) |
| 통신 | 복잡함 (IPC 메커니즘 필요) | 간단함 (동일 프로세스 내에서 데이터 공유) |
| 오류 영향 범위 | 프로세스 내 오류는 해당 프로세스에만 영향 | 스레드 오류는 해당 프로세스 내의 모든 스레드에 영향 |
| 리소스 관리 | OS가 관리 | 프로세스 내에서 관리 |

# 메모리와 자원 구조
## 프로레스의 메모리와 자원구조

프로세스는 운영 체제로부터 독립적인 메모리 공간을 할당받는다. 

- **텍스트 섹션(Text Section)**: 프로그램의 실행 코드가 저장된다.
- **데이터 섹션(Data Section)**: 전역 변수와 정적 변수가 저장된다.
- **힙 섹션(Heap Section)**: 동적 메모리 할당이 이루어지는 공간으로, 프로그램 실행 중에 크기가 변경될 수 있다.
- **스택 섹션(Stack Section)**: 함수 호출과 관련된 로컬 변수와 반환 주소를 저장한다.

각 프로세스는 독립적인 실행 환경을 가지고 있다.

## 스레드의 메모리와 자원구조

스레드는 프로세스 내에서 생성되며, 프로세스의 메모리 공간을 공유합니다.
- **텍스트 섹션(Text Section)**: 프로세스 내의 모든 스레드가 공유한다.
- **데이터 섹션(Data Section)**: 프로세스 내의 모든 스레드가 공유한다.
- **힙 섹션(Heap Section)**: 프로세스 내의 모든 스레드가 공유한다.
- **스택 섹션(Stack Section)**: 각 스레드는 독립적인 실행 스택을 가진다. 이는 함수 호출, 로컬 변수, 반환 주소 등을 저장하는 데 사용된다.
스레드는 프로세스의 실행 환경을 공유한다. 그러나 각 스레드는 자신만의 프로그램 카운터와 스택 포인터를 가지고 있다.

이런 구조로 인해, 스레드는 프로세스에 비해 생성과 제거가 더 빠르고 효율적이다. 그러나 동일한 프로세스 내의 스레드가 메모리를 공유하기 때문에, 스레드간의 데이터 동기화에 주의해야 한다.

# 자원 공유

## 프로세스의 자원 공유
- 프로세스는 각각 독립된 메모리 영역을 가진다.
- 따라서, 프로세스간에 자원을 공유하려면 일반적으로 IPC(Inter-Process Communication)를 통해야 한다.  
    - IPC의 예로는 파이프, 소켓, 메시지 큐, 시그널, 세마포어 등이 있다.  
    - 공유 메모리라는 방식을 통해서도 자원을 공유할 수 있다. 공유 메모리 방식은 프로세스들이 메모리의 일부를 동시에 접근하게 해준다.   

## 스레드의 자원 공유
- 스레드는 같은 프로세스 내에서 생성되므로, 기본적으로 프로세스의 메모리와 자원을 공유한다.
- 스레드 간에는 별도의 IPC 없이도 자원을 공유할 수 있다.


-> 여러 프로세스나 스레드가 동일한 자원에 동시에 액세스하려고 하면, 데이터의 일관성이 깨질 수 있다.  
이를 'Race Condition'이라고 부르며 이러한 상황을 피하기 위해 다양한 동기화 기법이 사용된다.  

# 프로세스와 스레드의 생명 주기 차이
프로세스와 스레드의 생명 주기는 매우 유사하며, 대부분의 단계에서는 차이가 거의 없지만, '생성(Create)'과 '종료(Terminated)' 단계에서 주요한 차이점을 볼 수 있다.


## 생성 (Create)
- 프로세스: 프로세스가 생성될 때, 운영 체제는 프로세스에 대한 독립적인 메모리 공간을 할당 -> 이 과정은 상대적으로 많은 시간과 자원을 소모
- 스레드: 스레드가 생성될 때, 운영 체제는 이미 존재하는 프로세스의 메모리 공간 내에 스레드를 생성 -> 프로세스의 생성보다 훨씬 적은 시간과 자원을 필요로 함
  
## 종료 (Terminated)
- 프로세스: 프로세스가 종료될 때, 운영 체제는 프로세스가 사용하던 모든 메모리 공간을 회수하고, 모든 자원을 반환 -> 프로세스가 종료되면, 그 안에 존재하던 모든 스레드도 함께 종료됨
- 스레드: 스레드가 종료될 때, 해당 스레드에 할당되었던 스택과 레지스터 상태만 회수 -> 프로세스의 메모리 공간은 변하지 않고 따라서 당연히 스레드가 종료되어도 부모 프로세스와 다른 스레드는 계속 실행될 수 있다.

> 프로세스를 '집'이라고 생각하고 스레드를 그 집 안에 있는 '방'이라고 생각하면 이해하기 쉽다. 집을 지을 때는 많은 시간이 걸리지만 그 안에 방을 추가하는 것은 집을 짓는 것보다는 적은 시간이 소모될 것이다. 그리고 집을 없애면 당연히 그 안에 있는 방도 없어지지만 반대로 방을 없앤다고 집이 없어지지는 않는다.


