## 임계 영역(Critical Section)

임계 영역은 멀티스레딩 환경에서 두 개 이상의 스레드가 동시에 접근하면 문제가 발생할 수 있는 공유 자원을 접근하는 코드 영역을 말한다.

## 뮤텍스(Mutex)

- 뮤텍스는 상호 배제(Mutual Exclusion)를 제공하는 도구로, 한 번에 하나의 스레드만 임계 영역을 접근할 수 있도록 한다.
  
- 스레드는 임계 영역에 진입하기 전에 뮤텍스를 '잠그고(lock)', 임계 영역에서 빠져나올 때 '푼다(unlock)'

## 세마포어(Semaphore)

- 세마포어는 동시에 공유 자원에 접근할 수 있는 스레드의 최대 개수를 제한한다.
  
- 세마포어의 값이 1인 경우, 이는 뮤텍스와 같은 역할을 하며, 한 번에 하나의 스레드만 공유 자원에 접근할 수 있다. 

- 세마포어의 값이 2 이상인 경우, 해당 값만큼의 스레드가 동시에 공유 자원에 접근할 수 있다. 예를 들어 세마포어의 값이 3이라면, 동시에 세 개의 스레드가 공유 자원에 접근할 수 있다.

- 세마포어는 'wait' 연산으로 값을 감소시키고, 'signal' 연산으로 값을 증가시킨다. 이렇게 함으로써, 세마포어는 동시에 접근 가능한 스레드의 수를 동적으로 관리한다.

## 뮤텍스와 세마포어의 차이점

- 뮤텍스는 한 스레드가 공유 자원에 접근하면, 그 스레드가 뮤텍스를 해제하기 전까지 다른 모든 스레드는 그 자원에 접근할 수 없다. 

- 반면에 세마포어는 동시에 여러 스레드가 공유 자원에 접근할 수 있게 해준다.

## 뮤텍스와 세마포어의 동기화 문제

- 뮤텍스 : Deadlock
  - 한 스레드가 뮤텍스를 잠그고 임계 영역을 빠져나올 때 뮤텍스를 해제하지 않으면 다른 스레드가 무한히 기다리게 되어 데드락이 발생
  - 여러 뮤텍스를 사용할 때 스레드들이 뮤텍스를 얻는 순서에 따라 데드락이 발생할 수 있다.
- 세마포어: Race condition
  - 세마포어는 동시에 여러 스레드가 임계 구역에 접근할 수 있도록 허용하기 때문에, 이 스레드들이 데이터를 수정하게 되면 데이터 일관성이 깨질 수 있다. 이는 공유 데이터에 대한 동기화를 보장하지 못하는 문제를 야기한다.
